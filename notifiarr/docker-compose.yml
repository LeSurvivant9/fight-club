services:
  notifiarr:
    container_name: notifiarr
    image: golift/notifiarr:latest
    mem_limit: 512M
    networks:
      proxy:
    environment:
      - TZ=${TIMEZONE}
    volumes:
      - /opt/notifiarr/config:/config
      - /var/run/utmp:/var/run/utmp
      - /etc/machine-id:/etc/machine-id
    restart: unless-stopped
    labels:
      - "traefik.enable=true"
      - "traefik.docker.network=proxy"
      - "traefik.http.routers.notifiarr.entrypoints=http"
      - "traefik.http.routers.notifiarr.rule=Host(`notifiarr.${DOMAIN}`)"
      - "traefik.http.middlewares.notifiarr-https-redirect.redirectscheme.scheme=https"
      - "traefik.http.routers.notifiarr.middlewares=notifiarr-https-redirect"
      - "traefik.http.routers.notifiarr-secure.entrypoints=https"
      - "traefik.http.routers.notifiarr-secure.rule=Host(`notifiarr.${DOMAIN}`)"
      - "traefik.http.routers.notifiarr-secure.tls=true"
      - "traefik.http.routers.notifiarr-secure.tls.certresolver=cloudflare"
      - "traefik.http.routers.notifiarr-secure.service=notifiarr"
      - "traefik.http.services.notifiarr.loadbalancer.server.port=5454"

networks:
  proxy:
    external: true